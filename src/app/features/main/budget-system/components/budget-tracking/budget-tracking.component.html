<div class="bg-gray-900 rounded-xl p-6 border border-gray-800">
  <div class="mb-6">
    <h2 class="text-xl font-bold text-white">Budget Tracking</h2>
    <p class="text-gray-400 text-sm">
      Monitor your spending against budget limits
    </p>
  </div>

  <div class="flex flex-col gap-6">
    <div
      *ngFor="let budget of budgets"
      class="bg-gray-800 rounded-lg p-4 border border-gray-700 relative group"
    >
      <!-- Edit Button (Hidden by default, shown on hover) -->
      <button
        (click)="editBudget.emit(budget)"
        class="absolute top-4 right-4 text-gray-400 hover:text-white opacity-0 group-hover:opacity-100 transition-opacity"
        title="Edit Budget"
      >
        <i class="pi pi-pencil"></i>
      </button>

      <div class="flex justify-between items-end mb-2">
        <div>
          <h3 class="font-bold text-white text-lg">
            {{ getCategoryLabel(budget.category) }}
          </h3>
        </div>
        <div class="text-right">
          <div class="text-white font-bold">
            {{ budget.spentAmount || 0 | currency }}
            <span class="text-gray-500">/ {{ budget.amount | currency }}</span>
          </div>
          <div class="text-xs text-gray-500">{{ budget.period }}</div>
        </div>
      </div>

      <!-- Progress Bar -->
      <div class="h-2 bg-gray-700 rounded-full overflow-hidden mb-2">
        <div
          class="h-full bg-blue-500 rounded-full transition-all duration-500"
          [style.width.%]="calculatePercentage(budget)"
          [ngClass]="{
            'bg-red-500': isOverBudget(budget),
            'bg-blue-500': !isOverBudget(budget)
          }"
        ></div>
      </div>

      <div class="flex justify-between text-xs text-gray-400">
        <span>{{ calculatePercentage(budget) | number : "1.0-0" }}% used</span>
        <span
          >{{
            budget.amount - (budget.spentAmount || 0) | currency
          }}
          remaining</span
        >
      </div>
    </div>
  </div>
</div>
